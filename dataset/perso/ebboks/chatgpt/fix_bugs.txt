DECLARE
   TYPE BLOK_TRADE IS TABLE OF tbl_md_blocktrade%ROWTYPE;
   l_BLOK_TRADE  BLOK_TRADE;
   V_BLOK_TRADE tbl_md_blocktrade%ROWTYPE;
BEGIN
   FOR Cursor_orderRef IN (SELECT DISTINCT ord.ul_id FROM tblorders ord WHERE ord.ul_id = 'RE1a44d5290000') LOOP
      DBMS_OUTPUT.PUT_LINE('Le num√©ro de son ordre est ' || Cursor_orderRef.ul_id);
      SELECT * BULK COLLECT INTO l_BLOK_TRADE FROM tbl_md_blocktrade WHERE refs LIKE '%type="order" refid="' || Cursor_orderRef.ul_id || '%';

      FOR indx IN 1 .. l_BLOK_TRADE.COUNT LOOP
         V_BLOK_TRADE := l_BLOK_TRADE(indx);
         DBMS_OUTPUT.PUT_LINE('ordre ul_id: ' || Cursor_orderRef.ul_id || ', locktrade UL_ID:' || V_BLOK_TRADE.ul_id || ', INSTRUMENTID:' || V_BLOK_TRADE.INSTRUMENTID);
      END LOOP;
   END LOOP;
END;
/

Unicode String could not be converted to a Single-Byte

select PRD.PRODUCT_KEY,
    PRD.PRODUCT_NAME,CONVERT(PRD.PRODUCT_NAME,'UTF8','us7ascii'),
    PRD.PRODUCT_TYPE_CD,
    PRD.LAST_UPDATE_DATE,
    PRODUCT_SUB_TYPE_CD 
from SAM_PRF_ST_PRD PRD,  
    SAM_PRF_LE_ACT_SEG SEG,
    SAM_PRF_AGG_TRD_TMP2 TRD
    WHERE SEG.SEGMENT = 1 
    AND CONVERT(PRD.PRODUCT_NAME,'UTF8','us7ascii') <> PRD.PRODUCT_NAME
    AND IS_FOR_DETECTION = '1'  
    AND TRD.DAY_SK BETWEEN 8564 AND 8565 
    AND TRD.PRODUCT_SK = PRD.PRODUCT_SK
    AND SEG.ACCOUNT_KEY = TRD.ENTITY_KEY
    AND 1=1
    order by PRD.PRODUCT_KEY
